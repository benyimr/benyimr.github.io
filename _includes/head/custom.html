<!-- Automatically handle link targets -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  // 1) Forzar que Research + Teaching resources se abran en nueva pestaña
  document.querySelectorAll(".research-link, .teaching-links a").forEach(function(link) {
    if (!link.hasAttribute("target")) {
      link.setAttribute("target", "_blank");
      link.setAttribute("rel", "noopener noreferrer");
    }
  });

  // 2) Opcional: abrir AUTOMÁTICAMENTE en nueva pestaña el resto de links EXTERNOS
  document.querySelectorAll("a[href]").forEach(function(link) {
    const url = link.getAttribute("href");
    if (!url) return;

    // Saltar anchors, mailto, tel y URLs internas relativas
    if (
      url.startsWith("#") ||
      url.startsWith("/") ||
      url.startsWith("mailto:") ||
      url.startsWith("tel:")
    ) return;

    // No tocar enlaces que ya tengan target (por ejemplo los de arriba)
    if (link.hasAttribute("target")) return;

    // Sólo marcar externos (otro hostname)
    const linkHost = new URL(url, window.location.href).hostname;
    const siteHost = window.location.hostname;

    if (linkHost !== siteHost) {
      link.setAttribute("target", "_blank");
      link.setAttribute("rel", "noopener noreferrer");
    }
  });
});
</script>
